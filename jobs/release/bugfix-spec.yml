meta:
  mkdocs:
    destination:
      - "releases/bugfix/index.md"
  name: Creating a bugfix release
  description: |
    Performs a Kubernetes bugfix release, which includes validation across the base
    deployment as well as variations including calico, tigera, vault, nvidia, and
    ceph.
  long-description: |
    ## Bugfix Release Process

    ### 1. Cherry-pick fixes from master into stable branches

    ### 2. Document release notes

    - Bugfixes
    - Enhancements
    - Known Limitations/Issues

    ### 3. Run the **build-charms** job

    **Job**: https://jenkins.canonical.com/k8s/job/build-charms/

    This is the main job to run when needing to do a bugfix. The steps this build performs are as follows:

    - Build and Publish charms to the **candidate** channel.
    - The validation suite is run against a deployed **charmed-kubernetes**
    - The validation suite runs against a minor to minor upgrade
    - The validation suite is run against the following variations:
        - NVidia
        - Vault
        - Tigera EE
        - Calico
        - Ceph
        - AWS IAM
        - Snapd Upgrade

    **Note**: Keep up with the `release_id` as that will need to be referenced in
    case the job needs to be re-run due to build errors. Simply hitting `Rebuild`
    on the Jenkins job page will have that ID prepopulated.

    ### Promote charms from **candidate** and **stable**

    **Job**: https://jenkins.canonical.com/k8s/job/promote-charms/

    This job takes a tag, from_channel, and to_channel. The tag defaults to `k8s` so
    it will only promote the necessary charms that make up charmed-kuberneetes (the
    others are kubeflow related).

    ### Promote bundles from **candidate** and **stable**

    **Job**: https://jenkins.canonical.com/k8s/job/promote-bundles/

    Same as charm promotion.

    ### Send announcement to k8s-crew with any relevant information.
