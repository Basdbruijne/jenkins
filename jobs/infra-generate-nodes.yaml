# Generates jenkin worker nodes

- job:
    name: 'infra-generate-nodes'
    description: |
      Create jenkins worker nodes
    project-type: pipeline
    pipeline-scm:
      scm:
        - k8s-jenkins-scm
      script-path: jobs/infra/generateNodes.groovy
    properties:
      - build-blocker:
          use-build-blocker: true
          blocking-jobs:
            - ".*cdk.*"
            - ".*release.*"
            - ".*build.*"
            - ".*validate.*"
            - ".*conformance.*"
            - ".*gubernator.*"
          block-level: 'GLOBAL'
          queue-scanning: 'ALL'
    triggers:
        - timed: "@daily"
    properties:
      - build-discarder:
          days-to-keep: 1
          num-to-keep: 1
